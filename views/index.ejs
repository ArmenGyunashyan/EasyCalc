<!DOCTYPE html>
<html>
<head>
    <script src="skripts/dropdown.js"></script>
    <title>Home</title>
    <link rel="stylesheet" id="sheet"
          href="<% if(style == 'dunkel') { %>css/dark.css<% } else { %>css/default.css<% } %>">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>
<body>
<header class="header">
    <div class="fixed-size">
        <h1 class="logo">EasyCalc</h1>
        <label class="switch">
            <input type="checkbox" id="styleChecker" <% if(style == 'hell') { %>checked
                    <% } %>
            >
            <span class="slider round"></span>
        </label>
        <nav class="navbar">
            <div class="dropdown">
                <button onclick="mobileNavbar()" class="dropbtn">Options</button>
                <div id="myDropdown" class="dropdown-content">
                    <a href="index.html">HOME</a>
                    <a href="kurs.html">KURS</a>
                    <a href="formeln.html">FORMELN</a>
                    <% if(activeSession.loggedin) { %> <a href="logout">LOGOUT</a>
                    <% }
                    else { %>
                        <a href="login.html">LOGIN</a>
                    <% } %>
                </div>

            </div>
        </nav>
        <hr>
    </div>
</header>
<section class="fixed-size">
    <!--
    ===================================
    Flip Cards
    ===================================
    -->
    <h1 class="flip-card-header">Rechner</h1>
    <div class="flip-card">
        <div class="flip-card-inner">
            <div class="flip-card-front">
                <img class="flip-card-image" src="images/platzhalter.jpg" alt="Maßeinheiten">
            </div>
            <div class="flip-card-back" onclick="window.location='masseinheiten-rechner.html'">
                <h1 class="flip-card-title">Maßeinheiten</h1>
                <p class="flip-card-text">Text</p>
            </div>
        </div>
    </div>
    <div class="flip-card">
        <div class="flip-card-inner">
            <div class="flip-card-front">
                <img class="flip-card-image" src="images/platzhalter.jpg" alt="Währungen">
            </div>
            <div class="flip-card-back" onclick="window.location='waehrungen-rechner.html'">
                <h1 class="flip-card-title">Währungen</h1>
                <p class="flip-card-text">Text</p>
            </div>
        </div>
    </div>
    <div class="flip-card">
        <div class="flip-card-inner">
            <div class="flip-card-front">
                <img class="flip-card-image" src="images/platzhalter.jpg" alt="Strom">
            </div>
            <div class="flip-card-back" onclick="window.location='strom-rechner.html'">
                <h1 class="flip-card-title">Strom</h1>
                <p class="flip-card-text">Text</p>
            </div>
        </div>
    </div>
    <!--
    ===================================
    Charts
    ===================================
    -->
    <div id="chartContainer" class="chart fixed-size"></div>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <!--
    ===================================
    Footer
    ===================================
    -->
</section>
<div>
    <footer class="footer fixed-size">
        <hr>
        <h1 class="footer-header"><a href="impressum.html">Impressum</a></h1>
        <p>Dennis & Armen</p>
        <p>Münsterstraße 999 Bocholt</p>
        <p>WHS</p>
    </footer>
</div>
</body>

<!--
===================================
Chart Skript: CanvasJS
===================================
-->
<script>

    var chart = new CanvasJS.Chart("chartContainer", {
        animationEnabled: true,
        backgroundColor: "transparent",
        color: "red",
        title: {
            text: "Nutzung der Rechner",
            fontFamily: "Orbitron",
            fontColor: "<% if(style == 'dunkel') { %>lightgray<% } else { %>black<% } %>",
        },
        legend: {
            verticalAlign: "bottom",
            fontColor: "lightgray",
            markerMargin: 8,
            fontFamily: "Orbitron",
        },
        data: [{
            type: "pie",
            showInLegend: true,
            startAngle: 240,
            yValueFormatString: "#\"\"",
            indexLabel: "{y}",
            legendText: "{name}",
            dataPoints: [
                {
                    y: <%= statistics.measure %>,
                    color: "#179180",
                    indexLabelFontColor: "<% if(style == 'dunkel') { %>lightgray<% } else { %>black<% } %>",
                    name: "Maßeinheitenrechner"
                },
                {
                    y: <%= statistics.energy %>,
                    color: "#2b6059",
                    indexLabelFontColor: "<% if(style == 'dunkel') { %>lightgray<% } else { %>black<% } %>",
                    name: "Stromrechner"
                },
                {
                    y: <%= statistics.money %>,
                    color: "#0f4f46",
                    indexLabelFontColor: "<% if(style == 'dunkel') { %>lightgray<% } else { %>black<% } %>",
                    name: "Währungsrechner"
                },
            ]
        }]
    });

    chartLoad(chart);
    function chartLoad(chart) {
        chart.render();
    }
</script>
<!--
===================================
Cookies Skript
===================================
-->
<script>
    /**
     * Der Code musste hier angepasst werden (teilweise redundant), da Chrom und Edge anders mit Cookies umgehen, als Opera.
     * Chrom kann in Cookies nur schreiben und Sie nicht richtig lesen.
     */
    const stylesheet = document.getElementById("sheet");
    const checkBox = document.getElementById("styleChecker");


    var style = "<%= style %>";
    /*
    if(style == 'dunkel') {
        checkBox.checked = false;
    } else {
        checkBox.checked = true;
    }
    */

    checkBox.onclick = function () {
        if (this.checked) {
            document.cookie = "style=hell";
            stylesheet.href = "css/default.css";

            var chartDefault = new CanvasJS.Chart("chartContainer", {
                animationEnabled: true,
                backgroundColor: "transparent",
                color: "red",
                title: {
                    text: "Nutzung der Rechner",
                    fontFamily: "Orbitron",
                    fontColor: "black",
                },
                legend: {
                    verticalAlign: "bottom",
                    fontColor: "black",
                    markerMargin: 8,
                    fontFamily: "Orbitron",
                },
                data: [{
                    type: "pie",
                    showInLegend: true,
                    startAngle: 240,
                    yValueFormatString: "#\"\"",
                    indexLabel: "{y}",
                    legendText: "{name}",
                    dataPoints: [
                        {
                            y: <%= statistics.measure %>,
                            color: "#179180",
                            indexLabelFontColor: "black",
                            name: "Maßeinheitenrechner"
                        },
                        {
                            y: <%= statistics.energy %>,
                            color: "#2b6059",
                            indexLabelFontColor: "black",
                            name: "Stromrechner"
                        },
                        {
                            y: <%= statistics.money %>,
                            color: "#0f4f46",
                            indexLabelFontColor: "black",
                            name: "Währungsrechner"
                        },
                    ]
                }]
            });
            chartLoad(chartDefault);
        } else {
            document.cookie = "style=dunkel";
            stylesheet.href = "css/dark.css";

            var chartDark = new CanvasJS.Chart("chartContainer", {
                animationEnabled: true,
                backgroundColor: "transparent",
                color: "red",
                title: {
                    text: "Nutzung der Rechner",
                    fontFamily: "Orbitron",
                    fontColor: "lightgray",
                },
                legend: {
                    verticalAlign: "bottom",
                    fontColor: "lightgray",
                    markerMargin: 8,
                    fontFamily: "Orbitron",
                },
                data: [{
                    type: "pie",
                    showInLegend: true,
                    startAngle: 240,
                    yValueFormatString: "#\"\"",
                    indexLabel: "{y}",
                    legendText: "{name}",
                    dataPoints: [
                        {
                            y: <%= statistics.measure %>,
                            color: "#179180",
                            indexLabelFontColor: "lightgray",
                            name: "Maßeinheitenrechner"
                        },
                        {
                            y: <%= statistics.energy %>,
                            color: "#2b6059",
                            indexLabelFontColor: "lightgray",
                            name: "Stromrechner"
                        },
                        {
                            y: <%= statistics.money %>,
                            color: "#0f4f46",
                            indexLabelFontColor: "lightgray",
                            name: "Währungsrechner"
                        },
                    ]
                }]
            });
            chartLoad(chartDark);

        }
    }

</script>
</html>